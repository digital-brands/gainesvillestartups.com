jQuery(function(){jQuery('select[name="action"]').append(jQuery("<option/>").attr("value","sis-regenerate").text(sis.regenerate));jQuery(".sis-regenerate-one").click(function(a){a.preventDefault();new c(this)});jQuery("#doaction").click(function(a){if("sis-regenerate"==jQuery(this).parent().find("select").val()){var b=jQuery('.wp-list-table.media #the-list tr input[type="checkbox"]:checked');0<b.length&&(a.preventDefault(),b.each(function(){new c(jQuery(this))}))}});var c=function(a){({list:"",percent:"",
el:"",id:"",messageZone:"",init:function(b){this.el=jQuery(b);(id=this.el.attr("id"))?this.id=id.replace("post-",""):(id=this.el.closest(".media-item").attr("id"),this.id=id.replace("media-item-",""));this.list={id:this.id,title:"titre"};0==this.el.find(".title em").size()&&this.el.find(".title strong").after("<em/>");this.messageZone=this.el.find(".title em");this.el.hasClass("ajaxing")||this.regenItem()},setMessage:function(b){this.messageZone.html(" - "+b).addClass("updated").addClass("fade").show()},
regenItem:function(){var b=this,a=jQuery("input.regen").val();jQuery.ajax({url:sis.ajaxUrl,type:"POST",dataType:"json",data:"action=sis_ajax_thumbnail_rebuild&do=regen&id="+this.list.id+"&nonce="+a,beforeSend:function(){b.el.fadeTo("fast","0.2").addClass("ajaxing")},success:function(a){var c="",c=!a.src||!a.time||a.error||"object"!==typeof a?"object"!==typeof a?sis.phpError:a.error:sis.soloRegenerated.replace("%s",a.time);b.setMessage(c);b.el.fadeTo("fast","1").removeClass("ajaxing")}})}}).init(jQuery(a).closest("tr"))}});